<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R package development workshop</title>
  <meta name="description" content="R package development workshop">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R package development workshop" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R package development workshop" />
  <meta name="github-repo" content="sckott/pkgdev" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R package development workshop" />
  
  <meta name="twitter:description" content="R package development workshop" />
  

<meta name="author" content="built w/ devtools v1.13.6">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="functions.html">
<link rel="next" href="package-checks.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R package development workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> R package development</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#info"><i class="fa fa-check"></i><b>1.1</b> Info</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#package"><i class="fa fa-check"></i><b>2.1</b> What is a package?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="different-methods.html"><a href="different-methods.html"><i class="fa fa-check"></i><b>3</b> different methods of making packages</a><ul>
<li class="chapter" data-level="3.1" data-path="different-methods.html"><a href="different-methods.html#ide-e.g.-rstudio"><i class="fa fa-check"></i><b>3.1</b> IDE: e.g., RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="different-methods.html"><a href="different-methods.html#diy-e.g.-text-editor-and-command-line"><i class="fa fa-check"></i><b>3.2</b> DIY: e.g., text editor and command line</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="package-structure.html"><a href="package-structure.html"><i class="fa fa-check"></i><b>4</b> package structure</a><ul>
<li class="chapter" data-level="4.1" data-path="package-structure.html"><a href="package-structure.html#xxx"><i class="fa fa-check"></i><b>4.1</b> xxx</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> functions</a></li>
<li class="chapter" data-level="6" data-path="security.html"><a href="security.html"><i class="fa fa-check"></i><b>6</b> security</a><ul>
<li class="chapter" data-level="6.1" data-path="security.html"><a href="security.html#api-keys"><i class="fa fa-check"></i><b>6.1</b> API keys and such</a></li>
<li class="chapter" data-level="6.2" data-path="security.html"><a href="security.html#other-security"><i class="fa fa-check"></i><b>6.2</b> Other security</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="package-checks.html"><a href="package-checks.html"><i class="fa fa-check"></i><b>7</b> Package checks</a><ul>
<li class="chapter" data-level="7.1" data-path="package-checks.html"><a href="package-checks.html#lightswitch-vcr-webmockr-and-their-onoff-states"><i class="fa fa-check"></i><b>7.1</b> lightswitch: vcr, webmockr and their on/off states</a></li>
<li class="chapter" data-level="7.2" data-path="package-checks.html"><a href="package-checks.html#turned-off"><i class="fa fa-check"></i><b>7.2</b> turned_off</a></li>
<li class="chapter" data-level="7.3" data-path="package-checks.html"><a href="package-checks.html#turn-off"><i class="fa fa-check"></i><b>7.3</b> turn_off</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="extras.html"><a href="extras.html"><i class="fa fa-check"></i><b>8</b> Extras</a><ul>
<li class="chapter" data-level="8.1" data-path="extras.html"><a href="extras.html#extras-tests"><i class="fa fa-check"></i><b>8.1</b> tests</a></li>
<li class="chapter" data-level="8.2" data-path="extras.html"><a href="extras.html#extras-ci"><i class="fa fa-check"></i><b>8.2</b> continuous integration</a></li>
<li class="chapter" data-level="8.3" data-path="extras.html"><a href="extras.html#extras-vign"><i class="fa fa-check"></i><b>8.3</b> vignettes</a></li>
<li class="chapter" data-level="8.4" data-path="extras.html"><a href="extras.html#extras-resources"><i class="fa fa-check"></i><b>8.4</b> resources</a></li>
<li class="chapter" data-level="8.5" data-path="extras.html"><a href="extras.html#extras-bar"><i class="fa fa-check"></i><b>8.5</b> bar</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>9</b> session info</a></li>
<li class="divider"></li>
<li><a href="https://github.com/sckott/pkgdev" target="blank">(c) Scott Chamberlain, 2018</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R package development workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="security" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> security</h1>
<div id="api-keys" class="section level2">
<h2><span class="header-section-number">6.1</span> API keys and such</h2>
<p>The configuration parameter <code>filter_sensitive_data</code> accepts a named list.</p>
<p>Each element in the list should be of the following format:</p>
<p><code>thing_to_replace_it_with = thing_to_replace</code></p>
<p>We replace all instances of <code>thing_to_replace</code> with <code>thing_to_replace_it_with</code>.</p>
<p>Before recording (writing to a cassette) we do the replacement and then when
reading from the cassette we do the reverse replacement to get back
to the real data.</p>
<p>The before record replacement happens in an internal
function <code>write_interactions()</code>, while before playback replacement
happens in internal function <code>YAML$deserialize_path()</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">vcr_configure</span>(</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="dt">filter_sensitive_data =</span> <span class="kw">list</span>(<span class="st">&quot;&lt;&lt;&lt;my_api_key&gt;&gt;&gt;&quot;</span> =<span class="st"> </span><span class="kw">Sys.getenv</span>(<span class="st">&#39;API_KEY&#39;</span>))</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">)</a></code></pre></div>
<p>You want to make the string that replaces your sensitive string something that
won’t be easily found elsewhere in the response body/headers/etc.</p>
<p>It’s a good idea to not in place of <code>thing_to_replace</code> put your actual sensitive
key thing, because that defeats the purpose of trying to protect your private
data. This is why we highly recommend setting your API keys as environment
variables, then you can as seen above just put a call to <code>Sys.getenv()</code>,
which we’ll use internally to get your key, find it anywhere in the HTTP
responses, and replace it with your placeholder string.</p>
<p>The reason you want to do this is because you may on purpose or on accident
push your cassettes to the public web, and when that happens you don’t want
your private keys in those cassettes.</p>
<p>Note that the way this is implemented in <code>vcr</code> is not super elegant and is
not general with respect to the serializer. We only support YAML serializing
right now, but when we support other serializers we’ll need to change the implementation.</p>
</div>
<div id="other-security" class="section level2">
<h2><span class="header-section-number">6.2</span> Other security</h2>
<p>Let us know about any other security concerns! Surely there’s things we haven’t considered yet.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="package-checks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sckott/pkgdev/edit/master/05-development-flow.Rmd",
"text": "Edit"
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
